<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nanoDc.erp.mapper.UserInfoMapper">
	<!-- SELECT -->
	<select id="selectUserInfoList"  resultType="com.nanoDc.erp.vo.UserInfoVO">
		SELECT 
		    u.user_id,
		    u.phone_number,
		    u.user_status,
		    u.user_reg_date,
		    u.user_name,
		    u.user_email,
		    u.profile_picture_url
		FROM 
		    user_info u	
		WHERE 
		    u.user_status != 'inactive'
		GROUP BY 
		    u.user_email
	</select>
	
	<select id="get_last_useriId"  resultType="integer">
		SELECT MAX(user_id) AS user_id
		FROM user_info;

	</select>
	<!-- INSERT -->
	<insert id="addNewUser" parameterType="com.nanoDc.erp.vo.UserInfoVO">
		INSERT INTO filmountain.user_info
		(phone_number,
		 user_status, 
		 user_reg_date, 
		 user_name, 
		 user_email, 
		 profile_picture_url)
		VALUES
		(#{phone_number}, 
		#{user_status}, 
		NOW(), 
		#{user_name}, 
		#{user_email}, 
		#{profile_picture_url})
	</insert>
	
	<insert id="addNewUser_pwd" parameterType="com.nanoDc.erp.vo.UserInfoVO">
		INSERT INTO filmountain.password
		(user_id,
		 password)
		VALUES
		(#{user_id}, 
		#{password});
	</insert>
	
</mapper>
	