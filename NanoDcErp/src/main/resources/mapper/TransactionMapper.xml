<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nanoDc.erp.mapper.TransactionMapper">
	<insert id="addNewTransaction" parameterType="com.nanoDc.erp.vo.TransactionVO">
		  INSERT INTO transaction (
		    fil_amount,
		    reg_date,
		    status,
		   	type,
		    user_id,
		    wallet_id,
		    message
		  )
		  VALUES (
		    #{fil_amount},
		    NOW(),
		    #{status},
		    #{type},
		    #{user_id},
		    #{wallet_id},
		    #{message}
		  )
	</insert>
	<select id="selectTransactionsByUser" parameterType="integer" resultType="com.nanoDc.erp.vo.TransactionVO">
		  	SELECT transaction.transaction_id, transaction.fil_amount, transaction.user_id, transaction.status, transaction.wallet_id, transaction.type, transaction.reg_date, transaction.message,wallet.address
			FROM transaction transaction
			inner join wallet wallet on wallet.wallet_id = transaction.wallet_id
			WHERE transaction.user_id =#{user_id}
	</select>

</mapper>